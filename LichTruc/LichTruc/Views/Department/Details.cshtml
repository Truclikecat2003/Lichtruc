@model LichTruc.Models.DEPARTMENT
@{
    ViewBag.Title = "Chi tiết phòng ban";
    var employees = ViewBag.Employees as List<LichTruc.Models.EMPLOYEE>;
}

<h2>Chi tiết phòng ban</h2>

<div class="card mb-4">
    <div class="card-body">
        <p><strong>Mã phòng:</strong> @Model.dept_code</p>
        <p><strong>Tên phòng:</strong> @Model.dept_name</p>
        <p><strong>Phòng cha:</strong> @(Model.parent_dept_id.HasValue ? Model.parent_dept_id.ToString() : "Không")</p>
        <p><strong>Trạng thái:</strong> @(Model.is_active == true ? "Hoạt động" : "Không hoạt động")</p>
    </div>
</div>

<h4>Danh sách nhân viên thuộc phòng này</h4>

@if (employees != null && employees.Any())
{
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Mã nhân viên</th>
                <th>Họ tên</th>
                <th>Chức vụ</th>
                <th>Bằng cấp</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var emp in employees)
            {
                <tr>
                    <td>@emp.emp_code</td>
                    <td>@emp.full_name</td>
                    <td>@emp.position</td>
                    <td>@(emp.has_license == true ? "Có" : "Không")</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">Không có nhân viên nào trong phòng này.</p>
}

<p>
    @Html.ActionLink("Quay lại danh sách", "Index", null, new { @class = "btn btn-secondary" })
</p>
